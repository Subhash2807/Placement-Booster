<!-- <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
    let totalQuestion=2;
    var count = 0;
    var score = 0;
    var prev = -1;
    const url = window.location.href;
    const origin = window.location.origin;
    const subject = url.split('?')[1].split('=')[1];
    console.log(subject);
    console.log(window.location.href);
    async function getQuestion(){
        const question = await axios.post(origin+"/home/get-question",{subject});
        return question;
    }
    async function saveScore(){
        const r = await axios.post(origin+"/home/savescore",{score:score,subject:subject});
    }
    async function nextQuestion(){
        if(count!=0){
            const radioOptions = document.querySelectorAll("input[type=radio]");
            radioOptions.forEach(option=>{
                if(option.checked && option.value==prev){
                    // console.log("value",option.value,prev);
                    score++;
                }
                option.checked=false;
            })
        }
        count++;
        if(count>totalQuestion){
            console.log("test over",score);
            document.getElementById("score").hidden='';
            document.getElementById("test").hidden='hidden';
            document.getElementById("score").innerHTML="<h1>Score is "+score + '.';
            saveScore();
            return;
        }
        
        const question = await getQuestion();
        
        console.log(question.data)
        prev = question.data.correct;
        document.getElementById('qno').innerText=count;
        document.getElementById('question').innerText=question.data.question;
        document.getElementById('opl1').innerText=question.data.op1;
        document.getElementById('opl2').innerText=question.data.op2;
        document.getElementById('opl3').innerText=question.data.op3;
        document.getElementById('opl4').innerText=question.data.op4;    
        
    }
        const startTest = () =>{
            document.getElementById("start").hidden='hidden';
            document.getElementById("test").hidden='';
            nextQuestion();
        }
    
</script>
<body>

    <div id="start">
        <button onclick="startTest()"> Start Test </button>
    </div>

    <div id="test" hidden>
        <h2 id="qno"></h2><h2 id="question"></h2>
            <input type="radio" id="op1" name="option" value="0">
            <label for="op1" id="opl1"></label><br>
            <input type="radio" id="op2" name="option" value="1">
            <label for="op2" id="opl2"></label><br>
            <input type="radio" id="op3" name="option" value="2">
            <label for="op3" id="opl3"></label><br>
            <input type="radio" id="op4" name="option" value="3">
            <label for="op4" id="opl4"></label><br>
            <button id="start-test" onclick="nextQuestion(this)">Next Question</button>
    </div>
    <div id="score" hidden ></div>
</body> -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <!-- Lato font style -->
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700,900&display=swap" rel="stylesheet">
    <!-- Bootstrap CDN -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <!-- include style.css -->
    <link rel="stylesheet" href="/css/style.css">
</head>

<body>

    <!-- Quiz template -->
    <template id="quiz">
        <div class="wrapper">
            <!-- Name -->
            <div class="quiz-content">
                <div class="card">
                    <!-- Quiz header -->
                    <div class="card-header shadow-sm">
                        <div class="row">
                            <div class="col-9">
                                <h4 class="welcome"></h4>
                            </div>
                            <div class="col-3">
                                <div class="timer">
                                    <span>00:00</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Quiz body -->
                    <div class="card-body">
                        <div class="question"></div>
                        <button class="btn-next">Next Question</button>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <!-- Main section -->
    <section id="main">
        <div class="wrapper">
            <div class="wrapper-content">
                <form class="welcome-form">
                    <!-- <input type="text" class="userName" name="userName" placeholder="Enter Your Name" autocomplete="off" > -->
                    <h1 name="userName" class="userName">Welcome <%= user.name %>,</h1>
                    <button type="submit">Start Quiz</button>
                </form>
            </div>
        </div>
    </section>

    <!-- Quiz Page -->
    <section id="quizSection"></section>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
        integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
        crossorigin="anonymous"></script>
    <!-- include app.js -->
    <script src="/js/app.js" type="module" defer></script>
</body>

</html>